{"version":3,"sources":["../lib/HtmlElements.js"],"names":[],"mappings":"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","file":"HtmlElements.js","sourcesContent":["\nconst logger = Loggers.create(__filename, 'info');\n\nconst SelfClosingElementNames = Strings.splitSpace(`\n   area base basefont br hr input img link meta\n   `\n);\n\nconst ElementNames = Strings.splitSpace(`\n   html head meta link script body\n   header footer nav section article aside\n   h1 h2 h3 h4 h5 h6\n   table thead tbody th tr td\n   div span pre p a hr br img i b tt\n   `\n);\n\n\n// experimental\n\nclass Element {\n\n   constructor({name, attributes, children}) {\n   }\n\n}\n\nclass HtmlElement {\n\n   constructor({name, attributes, children}) {\n   }\n\n   toString() {\n      return '';\n   }\n}\n\n\n// html template literal function\n\nexport function html(strings, ...values) {\n   strings = strings.map(string => string.replace(/^\\s*\\n\\s*/, ''));\n   logger.debug('html', strings, values);\n   let previousString = strings[0];\n   return values.reduce((result, value, index) => {\n      const nextString = strings[index + 1];\n      if (!Values.isDefined(value)) {\n         value = '';\n      }\n      try {\n         if (lodash.endsWith(previousString, '=')) {\n            if (/^[\"']/.test(nextString)) {\n               throw {message: 'quotes'};\n            } else if (lodash.isString(value)) {\n               value = '\"' + value + '\"';\n            } else {\n               throw {message: typeof value};\n            }\n         }\n         if (lodash.endsWith(previousString, '=\\'')) {\n            if (!/^'/.test(nextString)) {\n               throw {message: 'missing closing single quote'};\n            } else if (lodash.isString(value)) {\n            } else {\n               throw {message: typeof value};\n            }\n         }\n         if (lodash.endsWith(previousString, '=\\\"')) {\n            if (!/^\"/.test(nextString)) {\n               throw {message: 'missing closing double quote'};\n            } else if (lodash.isString(value)) {\n            } else {\n               throw {message: typeof value};\n            }\n         }\n         if (lodash.isArray(value)) {\n            value = lodash.flatten(value).join('\\n');\n         } else if (lodash.isString(value)) {\n         } else {\n            throw {message: 'value type: ' + typeof value};\n         }\n      } catch (err) {\n         logger.error('html', err.message, {previousString, value, nextString});\n         throw err;\n      }\n      previousString = nextString;\n      return result + value + nextString;\n   }, previousString);\n}\n\n\n// element renderer\n\nexport function element(name, attributes, ...args) {\n   const content = [];\n   if (!attributes) {\n      return ['<', name, '/>'].join('');\n   }\n   const children = lodash.compact(lodash.flatten(args));\n   if (!lodash.isObject(attributes)) {\n      throw {message: 'attributes: ' + typeof attributes, context: {name, attributes, children}};\n   }\n   const attrs = Objects.kvs(attributes)\n   .filter(kv => kv.key !== 'meta')\n   .filter(kv => kv.value && kv.value.toString())\n   .map(kv => ({key: kv.key, value: kv.value.toString()}))\n   .map(kv => `${kv.key}=\"${kv.value}\"`);\n   logger.debug('element', name, attrs);\n   return renderElements(name, attributes, attrs, children);\n}\n\nfunction renderElements(name, attributes, attrs, children) {\n   if (isMeta(attributes, 'repeat')) {\n      if (!children.length) {\n         return '';\n      } else if (!lodash.isArray(children)) {\n         throw {message: 'children type: ' + typeof children, name, attributes, children};\n      } else if (lodash.isEmpty(children)) {\n         return '';\n      } else {\n         return lodash.flatten(children).map(child => {\n            return renderElementChildren(name, attributes, attrs, child);\n         }).join('\\n');\n      }\n   } else {\n      return renderElementChildren(name, attributes, attrs, children);\n   }\n}\n\nfunction renderElementChildren(name, attributes, attrs, ...children) {\n   const content = [];\n   children = lodash.flatten(children);\n   if (!attrs.length && !children.length) {\n      if (isMeta(attributes, 'optional')) {\n      } else {\n         if (SelfClosingElementNames.includes(name)) {\n            return `<${name}/>`;\n         } else {\n            return `<${name}></${name}>`;\n         }\n      }\n   } else if (attrs.length && children.length) {\n      content.push(`<${name} ${attrs.join(' ')}>`);\n      content.push(joinContent(name, attributes, children));\n      content.push(`</${name}>`);\n   } else if (attrs.length) {\n      if (SelfClosingElementNames.includes(name)) {\n         content.push(`<${name} ${attrs.join(' ')}/>`);\n      } else {\n         content.push(`<${name} ${attrs.join(' ')}></${name}>`);\n      }\n   } else {\n      content.push(`<${name}>`);\n      content.push(joinContent(name, attributes, children));\n      content.push(`</${name}>`);\n   }\n   return joinContent(name, attributes, content);\n}\n\nfunction isMeta(attributes, metaName) {\n   logger.debug('isMeta', attributes, metaName);\n   if (!attributes.meta) {\n      return false;\n   } else if (lodash.isString(attributes.meta)) {\n      return attributes.meta === metaName;\n   } else if (lodash.isArray(attributes.meta)) {\n      return attributes.meta.includes(metaName);\n   } else {\n      throw {message: 'Meta type: ' + typeof attributes.meta, attributes};\n   }\n}\n\nfunction joinContent(name, attributes, ...children) {\n   children = lodash.flatten(children);\n   if (name === 'pre') {\n      return children.join('\\n');\n   } else {\n      return children.join('');\n   }\n}\n\nfunction _style(name, style, ...children) {\n   logger.debug('_style', name, style, children);\n   if (typeof style !== 'string') {\n      throw {message: 'style type: ' + typeof style, name, style, children};\n   } else {\n      return element(name, {style}, ...children);\n   }\n}\n\nfunction _content(name, ...children) {\n   return element(name, {}, ...children);\n}\n\nexport function assignElements(fn) {\n   return ElementNames.reduce((result, name) => {\n      result[name] = fn;\n      return result;\n   }, {});\n}\n\nexport function createElements() {\n   return ElementNames.reduce((result, name) => {\n      result[name] = (...args) => element(name, ...args);\n      return result;\n   }, {});\n}\n\nexport function createStyleElements() {\n   return ElementNames.reduce((result, name) => {\n      result[name] = (...args) => _style(name, ...args);\n      return result;\n   }, {});\n}\n\nexport function createMetaElements() {\n   return ElementNames.reduce((result, name) => {\n      result[name] = (meta, attributes, ...args) => element(name, Object.assign({meta}, attributes), ...args);\n      return result;\n   }, {});\n}\n\nexport function createMetaStyleElements(meta) {\n   return ElementNames.reduce((result, name) => {\n      result[name] = (style, ...args) => element(name, {meta, style}, ...args);\n      return result;\n   }, {});\n}\n\nexport function createMetaContentElements(meta) {\n   return ElementNames.reduce((result, name) => {\n      result[name] = (...args) => element(name, {meta}, ...args);\n      return result;\n   }, {});\n}\n\n\nexport function createContentElements() {\n   return ElementNames.reduce((result, name) => {\n      result[name] = (...args) => _content(name, ...args);\n      return result;\n   }, {});\n}\n\n// util\n\nexport function onClick(url) {\n   const parts = [`document.body.style.opacity=.4`];\n   if (!url) {\n      logger.debug('onClick empty');\n   } else if (/^https?:\\/\\//.test(url)) {\n      return renderScript(\n         ...parts,\n         `window.location='${renderPath(url)}'`\n      );\n   } else if (url[0] === '/') {\n      return renderScript(\n         ...parts,\n         `window.location.pathname='${renderPath(url)}'`\n      );\n   } else {\n      return renderScript(\n         ...parts,\n         `window.location.pathname='/${renderPath(url)}'`\n      );\n   }\n}\n\nexport function renderScript(...lines) {\n   return lodash.compact(lines).join(';');\n}\n\nexport function renderPath(path) {\n   if (lodash.isArray(path)) {\n      return ['', ...path].join('/');\n   } else if (lodash.isString(path)) {\n      return path;\n   } else {\n      return '/routes';\n      logger.warn('path type', typeof path);\n   }\n}\n\n// util\n\nexport function ms(meta, style) {\n   return {meta, style};\n}\n\n//\n\nexport function assignDeps(g) {\n   g.He = createElements();\n   g.Hs = createStyleElements();\n   g.Hm = createMetaElements();\n   g.Hso = createMetaStyleElements('optional');\n   g.Hsr = createMetaStyleElements('repeat');\n   g.Hc = createContentElements();\n   g.Hco = createMetaContentElements('optional');\n   g.Hx = module.exports;\n   g.html = html;\n}\n"]}