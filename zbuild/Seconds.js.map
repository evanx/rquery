{"version":3,"sources":["../lib/Seconds.js"],"names":[],"mappings":";;;;;;;AAGA,IAAM,SAAS,QAAQ,MAAR,CAAe,UAAf,EAA2B,MAA3B,CAAf;;AAEA,IAAM,UAAU;AACb,MAAG,CADU;AAEb,MAAG,EAFU;AAGb,MAAG,KAAG,EAHO;AAIb,MAAG,KAAG,EAAH,GAAM;AAJI,CAAhB;;AAOA,IAAM,OAAO;AACV,YAAS,OADC;AAEV,SAFU,kBAEH,OAFG,EAEM;AACb,UAAI,UAAU,QAAQ,CAAtB,EAAyB;AACtB,gBAAO,KAAK,OAAL,GAAe,GAAtB;AACF,OAFD,MAEO,IAAI,UAAU,QAAQ,CAAtB,EAAyB;AAC7B,gBAAO,KAAK,SAAS,UAAQ,QAAQ,CAAzB,CAAL,GAAmC,GAA1C;AACF,OAFM,MAEA,IAAI,UAAU,QAAQ,CAAtB,EAAyB;AAC7B,gBAAO,KAAK,SAAS,UAAQ,QAAQ,CAAzB,CAAL,GAAmC,GAA1C;AACF,OAFM,MAEA;AACJ,gBAAO,KAAK,SAAS,UAAQ,QAAQ,CAAzB,CAAL,GAAmC,GAA1C;AACF;AACH,IAZS;AAaV,QAbU,iBAaJ,MAbI,EAaI,YAbJ,EAakB;AAAA,iBACE,OAAO,KAAP,CAAa,oBAAb,KAAsC,EADxC;;AAAA;;AAAA,UAClB,KADkB;AAAA,UACX,SADW;;AAEzB,UAAI,CAAC,OAAO,SAAP,CAAiB,KAAjB,CAAL,EAA8B;AAC3B,eAAM,IAAI,eAAJ,mBAAN;AACF,OAFD,MAEO,IAAI,SAAJ,EAAe;AACnB,aAAM,SAAS,QAAQ,SAAR,CAAf;AACA,aAAI,CAAC,MAAL,EAAa;AACV,kBAAM,IAAI,eAAJ,kCAAmD,SAAnD,CAAN;AACF;AACD,gBAAO,QAAQ,MAAf;AACF,OANM,MAMA;AACJ,gBAAO,KAAP;AACF;AACH,IA1BS;AA2BV,kBA3BU,2BA2BM,MA3BN,EA2Bc,GA3Bd,EA2BmB,YA3BnB,EA2BiC;AACxC,UAAI;AACD,gBAAO,KAAK,KAAL,CAAW,OAAO,GAAP,CAAX,EAAwB,YAAxB,CAAP;AACF,OAFD,CAEE,OAAO,GAAP,EAAY;AACX,eAAM,IAAI,eAAJ,CAAuB,GAAvB,UAA+B,IAAI,OAAnC,CAAN;AACF;AACH,IAjCS;AAkCV,cAlCU,uBAkCE,OAlCF,EAkCW;AAClB,aAAO,UAAU,QAAQ,CAAzB;AACF,IApCS;AAqCV,YArCU,qBAqCA,KArCA,EAqCO;AACd,aAAO,QAAQ,QAAQ,CAAvB;AACF,IAvCS;AAwCV,WAxCU,oBAwCD,IAxCC,EAwCK;AACZ,aAAO,OAAO,QAAQ,CAAtB;AACF,IA1CS;AA2CV,SA3CU;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA,eA2CH,OA3CG,EA2CM,OA3CN,EA2Ce;AACtB,gBAAU,UAAU,IAAV,GAAiB,OAA3B;AACA,aAAO,OAAP,EAAgB,OAAhB;AACA,UAAI,QAAQ,KAAK,KAAL,CAAW,OAAX,EAAoB,CAAC,CAArB,CAAZ;AACA,aAAO,SAAS,CAAhB,EAAmB,UAAU,IAAV,GAAiB,KAApC;AACA,aAAO,KAAP;AACF,IAjDS;AAAA,CAAb;;AAoDA,SAAS,UAAT,CAAoB,OAApB,EAA6B,OAA7B,EAAsC;AACnC,UAAO,UAAU,IAAV,GAAiB,OAAxB;AACF;;AAED,OAAO,OAAP,GAAiB,IAAjB","file":"Seconds.js","sourcesContent":["// Copyright (c) 2015, Evan Summers (twitter.com/evanxsummers)\n// ISC license, see http://github.com/evanx/redexutil/LICENSE\n\nconst logger = Loggers.create(__filename, 'info');\n\nconst factors = {\n   s: 1,\n   m: 60,\n   h: 60*60,\n   d: 60*60*24\n};\n\nconst that = {\n   factors: factors,\n   format(seconds) {\n      if (seconds < factors.m) {\n         return '' + seconds + 's';\n      } else if (seconds < factors.h) {\n         return '' + parseInt(seconds/factors.m) + 'm';\n      } else if (seconds < factors.d) {\n         return '' + parseInt(seconds/factors.h) + 'h';\n      } else {\n         return '' + parseInt(seconds/factors.d) + 'd';\n      }\n   },\n   parse(string, defaultValue) {\n      const [value, factorKey] = string.match(/^([0-9]+)([a-z]?)$/) || [];\n      if (!Values.isDefined(value)) {\n         throw new ValidationError(`invalid seconds`);\n      } else if (factorKey) {\n         const factor = factors[factorKey];\n         if (!factor) {\n            throw new ValidationError(`invalid seconds factor key: ${factorKey}`);\n         }\n         return value * factor;\n      } else {\n         return value;\n      }\n   },\n   parseKeyDefault(object, key, defaultValue) {\n      try {\n         return that.parse(object[key], defaultValue);\n      } catch (err) {\n         throw new ValidationError(`${key}: ${err.message}`);\n      }\n   },\n   fromMinutes(minutes) {\n      return minutes * factors.m;\n   },\n   fromHours(hours) {\n      return hours * factors.h;\n   },\n   fromDays(days) {\n      return days * factors.d;\n   },\n   assert(seconds, message) {\n      message = message + ': ' + seconds;\n      assert(seconds, message);\n      let value = that.parse(seconds, -1);\n      assert(value >= 0, message + ': ' + value);\n      return value;\n   }\n};\n\nfunction getMessage(seconds, message) {\n   return message + ': ' + seconds;\n}\n\nmodule.exports = that;\n"]}